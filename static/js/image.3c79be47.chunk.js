(this.webpackJsonpexcalidraw=this.webpackJsonpexcalidraw||[]).push([[46],{171:function(r,e,n){(function(r){var n;n=function(e){e.version="0.3.0";var n=function(){for(var r=0,e=new Array(256),n=0;256!=n;++n)r=1&(r=1&(r=1&(r=1&(r=1&(r=1&(r=1&(r=1&(r=n)?-306674912^r>>>1:r>>>1)?-306674912^r>>>1:r>>>1)?-306674912^r>>>1:r>>>1)?-306674912^r>>>1:r>>>1)?-306674912^r>>>1:r>>>1)?-306674912^r>>>1:r>>>1)?-306674912^r>>>1:r>>>1)?-306674912^r>>>1:r>>>1,e[n]=r;return"undefined"!==typeof Int32Array?new Int32Array(e):e}(),t="undefined"!==typeof r;function a(r){for(var e=-1,t=0,a=r.length-7;t<a;)e=(e=(e=(e=(e=(e=(e=(e=e>>>8^n[255&(e^r[t++])])>>>8^n[255&(e^r[t++])])>>>8^n[255&(e^r[t++])])>>>8^n[255&(e^r[t++])])>>>8^n[255&(e^r[t++])])>>>8^n[255&(e^r[t++])])>>>8^n[255&(e^r[t++])])>>>8^n[255&(e^r[t++])];for(;t<a+7;)e=e>>>8^n[255&(e^r[t++])];return-1^e}e.table=n,e.bstr=function(e){if(e.length>32768&&t)return a(new r(e));for(var o=-1,i=e.length-1,c=0;c<i;)o=n[255&(o^e.charCodeAt(c++))]^o>>>8,o=n[255&(o^e.charCodeAt(c++))]^o>>>8;return c===i&&(o=o>>>8^n[255&(o^e.charCodeAt(c))]),-1^o},e.buf=function(r){if(r.length>1e4)return a(r);for(var e=-1,t=0,o=r.length-3;t<o;)e=(e=(e=(e=e>>>8^n[255&(e^r[t++])])>>>8^n[255&(e^r[t++])])>>>8^n[255&(e^r[t++])])>>>8^n[255&(e^r[t++])];for(;t<o+3;)e=e>>>8^n[255&(e^r[t++])];return-1^e},e.str=function(r){for(var e,t,a=-1,o=0,i=r.length;o<i;)(e=r.charCodeAt(o++))<128?a=a>>>8^n[255&(a^e)]:e<2048?a=(a=a>>>8^n[255&(a^(192|e>>6&31))])>>>8^n[255&(a^(128|63&e))]:e>=55296&&e<57344?(e=64+(1023&e),t=1023&r.charCodeAt(o++),a=(a=(a=(a=a>>>8^n[255&(a^(240|e>>8&7))])>>>8^n[255&(a^(128|e>>2&63))])>>>8^n[255&(a^(128|t>>6&15|3&e))])>>>8^n[255&(a^(128|63&t))]):a=(a=(a=a>>>8^n[255&(a^(224|e>>12&15))])>>>8^n[255&(a^(128|e>>6&63))])>>>8^n[255&(a^(128|63&e))];return-1^a}},"undefined"===typeof DO_NOT_EXPORT_CRC?n(e):n({})}).call(this,n(160).Buffer)},186:function(r,e,n){var t=n(171);r.exports=function(r){if(137!==r[0])throw new Error("Invalid .png file header");if(80!==r[1])throw new Error("Invalid .png file header");if(78!==r[2])throw new Error("Invalid .png file header");if(71!==r[3])throw new Error("Invalid .png file header");if(13!==r[4])throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(10!==r[5])throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(26!==r[6])throw new Error("Invalid .png file header");if(10!==r[7])throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");var e=!1,n=[],c=8;for(;c<r.length;){a[3]=r[c++],a[2]=r[c++],a[1]=r[c++],a[0]=r[c++];var d=i[0]+4,f=new Uint8Array(d);f[0]=r[c++],f[1]=r[c++],f[2]=r[c++],f[3]=r[c++];var l=String.fromCharCode(f[0])+String.fromCharCode(f[1])+String.fromCharCode(f[2])+String.fromCharCode(f[3]);if(!n.length&&"IHDR"!==l)throw new Error("IHDR header missing");if("IEND"===l){e=!0,n.push({name:l,data:new Uint8Array(0)});break}for(var h=4;h<d;h++)f[h]=r[c++];a[3]=r[c++],a[2]=r[c++],a[1]=r[c++],a[0]=r[c++];var w=o[0];if(t.buf(f)!==w)throw new Error("CRC values for "+l+" header do not match, PNG file is likely corrupted");var u=new Uint8Array(f.buffer.slice(4));n.push({name:l,data:u})}if(!e)throw new Error(".png file ended prematurely: no IEND header was found");return n};var a=new Uint8Array(4),o=new Int32Array(a.buffer),i=new Uint32Array(a.buffer)},190:function(r,e,n){e.encode=n(191),e.decode=n(192)},191:function(r,e){r.exports=function(r,e){if(r=String(r),e=String(e),!/^[\x00-\xFF]+$/.test(r)||!/^[\x00-\xFF]+$/.test(e))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(r.length>=80)throw new Error('Keyword "'+r+'" is longer than the 79-character limit imposed by the PNG specification');for(var n,t=r.length+e.length+1,a=new Uint8Array(t),o=0,i=0;i<r.length;i++){if(!(n=r.charCodeAt(i)))throw new Error("0x00 character is not permitted in tEXt keywords");a[o++]=n}a[o++]=0;for(var c=0;c<e.length;c++){if(!(n=e.charCodeAt(c)))throw new Error("0x00 character is not permitted in tEXt content");a[o++]=n}return{name:"tEXt",data:a}}},192:function(r,e){r.exports=function(r){r.data&&r.name&&(r=r.data);for(var e=!0,n="",t="",a=0;a<r.length;a++){var o=r[a];if(e)o?t+=String.fromCharCode(o):e=!1;else{if(!o)throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content");n+=String.fromCharCode(o)}}return{keyword:t,text:n}}},193:function(r,e,n){var t=n(194),a=n(171);r.exports=function(r){var e,n=8,d=n;for(e=0;e<r.length;e++)n+=r[e].data.length,n+=12;var f=new Uint8Array(n);for(f[0]=137,f[1]=80,f[2]=78,f[3]=71,f[4]=13,f[5]=10,f[6]=26,f[7]=10,e=0;e<r.length;e++){var l=r[e],h=l.name,w=l.data,u=w.length,s=[h.charCodeAt(0),h.charCodeAt(1),h.charCodeAt(2),h.charCodeAt(3)];c[0]=u,f[d++]=o[3],f[d++]=o[2],f[d++]=o[1],f[d++]=o[0],f[d++]=s[0],f[d++]=s[1],f[d++]=s[2],f[d++]=s[3];for(var y=0;y<u;)f[d++]=w[y++];var v=s.concat(t(w)),p=a.buf(v);i[0]=p,f[d++]=o[3],f[d++]=o[2],f[d++]=o[1],f[d++]=o[0]}return f};var o=new Uint8Array(4),i=new Int32Array(o.buffer),c=new Uint32Array(o.buffer)},194:function(r,e){r.exports=function(r,e,n){var t=[],a=r.length;if(0===a)return t;var o=e<0?Math.max(0,e+a):e||0;for(void 0!==n&&(a=n<0?n+a:n);a-- >o;)t[a-o]=r[a];return t}},222:function(r,e,n){"use strict";n.r(e),n.d(e,"getTEXtChunk",(function(){return w})),n.d(e,"encodePngMetadata",(function(){return u})),n.d(e,"decodePngMetadata",(function(){return s})),n.d(e,"encodeSvgMetadata",(function(){return y})),n.d(e,"decodeSvgMetadata",(function(){return v}));var t=n(186),a=n.n(t),o=n(190),i=n.n(o),c=n(193),d=n.n(c),f=n(19),l=n(1);const h=r=>"arrayBuffer"in r?r.arrayBuffer():new Promise(((e,n)=>{const t=new FileReader;t.onload=r=>{var t;if(!(null===(t=r.target)||void 0===t?void 0:t.result))return n(new Error("couldn't convert blob to ArrayBuffer"));e(r.target.result)},t.readAsArrayBuffer(r)})),w=async r=>{const e=a()(new Uint8Array(await h(r))).find((r=>"tEXt"===r.name));return e?i.a.decode(e.data):null},u=async r=>{let{blob:e,metadata:n}=r;const t=a()(new Uint8Array(await h(e))),o=i.a.encode(l.D.excalidraw,JSON.stringify(await Object(f.e)({text:n,compress:!0})));return t.splice(-1,0,o),new Blob([d()(t)],{type:l.D.png})},s=async r=>{const e=await w(r);if((null===e||void 0===e?void 0:e.keyword)===l.D.excalidraw)try{const r=JSON.parse(e.text);if(!("encoded"in r)){if("type"in r&&r.type===l.t.excalidraw)return e.text;throw new Error("FAILED")}return await Object(f.c)(r)}catch(n){throw console.error(n),new Error("FAILED")}throw new Error("INVALID")},y=async r=>{let{text:e}=r;const n=await Object(f.f)(JSON.stringify(await Object(f.e)({text:e})),!0);let t="";return t+="\x3c!-- payload-type:".concat(l.D.excalidraw," --\x3e"),t+="\x3c!-- payload-version:2 --\x3e",t+="\x3c!-- payload-start --\x3e",t+=n,t+="\x3c!-- payload-end --\x3e",t},v=async r=>{let{svg:e}=r;if(e.includes("payload-type:".concat(l.D.excalidraw))){const r=e.match(/<!-- payload-start -->(.+?)<!-- payload-end -->/);if(!r)throw new Error("INVALID");const t=e.match(/<!-- payload-version:(\d+) -->/),a="1"!==((null===t||void 0===t?void 0:t[1])||"1");try{const e=await Object(f.a)(r[1],a),n=JSON.parse(e);if(!("encoded"in n)){if("type"in n&&n.type===l.t.excalidraw)return e;throw new Error("FAILED")}return await Object(f.c)(n)}catch(n){throw console.error(n),new Error("FAILED")}}throw new Error("INVALID")}}}]);
//# sourceMappingURL=image.3c79be47.chunk.js.map